# Migration `20191020125614-init`

This migration has been generated by Nicholas Kang at 10/20/2019, 12:56:14 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "lift"."User" (
  "company" TEXT    REFERENCES "Company"(id) ON DELETE SET NULL,
  "firstName" TEXT NOT NULL DEFAULT ''  ,
  "id" TEXT NOT NULL   ,
  "lastName" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

CREATE TABLE "lift"."Company" (
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

CREATE TABLE "lift"."BusinessUnit" (
  "company" TEXT    REFERENCES "Company"(id) ON DELETE SET NULL,
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

CREATE TABLE "lift"."Project" (
  "company" TEXT    REFERENCES "Company"(id) ON DELETE SET NULL,
  "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00'  ,
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  "owner" TEXT    REFERENCES "User"(id) ON DELETE SET NULL,
  "url" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

CREATE TABLE "lift"."ProjectProfile" (
  "businessUnit" TEXT    REFERENCES "BusinessUnit"(id) ON DELETE SET NULL,
  "id" TEXT NOT NULL   ,
  "project" TEXT    REFERENCES "Project"(id) ON DELETE SET NULL,
  PRIMARY KEY ("id")
);

CREATE TABLE "lift"."Spend" (
  "actualSavings" INTEGER    ,
  "baselineSpend" INTEGER NOT NULL DEFAULT 0  ,
  "forecastedSavingsAmount" INTEGER NOT NULL DEFAULT 0  ,
  "forecastedSavingsPercentage" INTEGER NOT NULL DEFAULT 0  ,
  "id" TEXT NOT NULL   ,
  "month" DATE NOT NULL DEFAULT '1970-01-01 00:00:00'  ,
  "projectProfile" TEXT    REFERENCES "ProjectProfile"(id) ON DELETE SET NULL,
  PRIMARY KEY ("id")
);

CREATE UNIQUE INDEX "lift"."Company.name" ON "Company"("name")

CREATE UNIQUE INDEX "lift"."Project.url" ON "Project"("url")
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration 20191013162655-init..20191020125614-init
--- datamodel.dml
+++ datamodel.dml
@@ -47,11 +47,12 @@
   spend        Spend[]
 }
 model Spend {
-  id                String         @default(cuid()) @id
-  month             DateTime
-  baselineSpend     Int
-  forecastedSavings Int
-  actualSavings     Int?
-  projectProfile    ProjectProfile
+  id                          String         @default(cuid()) @id
+  month                       DateTime
+  baselineSpend               Int
+  forecastedSavingsAmount     Int
+  forecastedSavingsPercentage Int
+  actualSavings               Int?
+  projectProfile              ProjectProfile
 }
```

## Photon Usage

You can use a specific Photon built for this migration (20191020125614-init)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20191020125614-init'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
